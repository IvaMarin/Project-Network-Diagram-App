# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'calculator.ui'
#
# Created by: PyQt5 UI code generator 5.15.4
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
import basedir_paths as bp


class Ui_calculator(object):
    def setupUi(self, calculator):
        calculator.setObjectName("calculator")
        calculator.resize(500, 500)
        calculator.setMinimumSize(QtCore.QSize(500, 500))
        calculator.setMaximumSize(QtCore.QSize(500, 500))
        calculator.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        calculator.setStyleSheet("background-color: rgb(224, 234, 255);")
        calculator.setWindowIcon(QtGui.QIcon(bp.join(bp.images_path, "vuc.ico")))
        self.calc_label = QtWidgets.QLabel(calculator)
        self.calc_label.setGeometry(QtCore.QRect(0, 0, 500, 61))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_label.setFont(font)
        self.calc_label.setStyleSheet("background-color: rgb(199, 228, 255);")
        self.calc_label.setObjectName("calc_label")
        self.calc_button_0 = QtWidgets.QPushButton(calculator)
        self.calc_button_0.setGeometry(QtCore.QRect(0, 419, 150, 81))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_0.setFont(font)
        self.calc_button_0.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_0.setObjectName("calc_button_0")
        self.calc_button_equal = QtWidgets.QPushButton(calculator)
        self.calc_button_equal.setGeometry(QtCore.QRect(150, 419, 150, 81))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_equal.setFont(font)
        self.calc_button_equal.setStyleSheet("background-color: rgb(120, 174, 255);")
        self.calc_button_equal.setObjectName("calc_button_equal")
        self.calc_button_7 = QtWidgets.QPushButton(calculator)
        self.calc_button_7.setGeometry(QtCore.QRect(0, 150, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_7.setFont(font)
        self.calc_button_7.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_7.setObjectName("calc_button_7")
        self.calc_button_8 = QtWidgets.QPushButton(calculator)
        self.calc_button_8.setGeometry(QtCore.QRect(100, 150, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_8.setFont(font)
        self.calc_button_8.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_8.setObjectName("calc_button_8")
        self.calc_button_9 = QtWidgets.QPushButton(calculator)
        self.calc_button_9.setGeometry(QtCore.QRect(200, 150, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_9.setFont(font)
        self.calc_button_9.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_9.setObjectName("calc_button_9")
        self.calc_button_4 = QtWidgets.QPushButton(calculator)
        self.calc_button_4.setGeometry(QtCore.QRect(0, 240, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_4.setFont(font)
        self.calc_button_4.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_4.setObjectName("calc_button_4")
        self.calc_button_5 = QtWidgets.QPushButton(calculator)
        self.calc_button_5.setGeometry(QtCore.QRect(100, 240, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_5.setFont(font)
        self.calc_button_5.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_5.setObjectName("calc_button_5")
        self.calc_button_6 = QtWidgets.QPushButton(calculator)
        self.calc_button_6.setGeometry(QtCore.QRect(200, 240, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_6.setFont(font)
        self.calc_button_6.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_6.setObjectName("calc_button_6")
        self.calc_button_1 = QtWidgets.QPushButton(calculator)
        self.calc_button_1.setGeometry(QtCore.QRect(0, 330, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_1.setFont(font)
        self.calc_button_1.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_1.setObjectName("calc_button_1")
        self.calc_button_2 = QtWidgets.QPushButton(calculator)
        self.calc_button_2.setGeometry(QtCore.QRect(100, 330, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_2.setFont(font)
        self.calc_button_2.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_2.setObjectName("calc_button_2")
        self.calc_button_3 = QtWidgets.QPushButton(calculator)
        self.calc_button_3.setGeometry(QtCore.QRect(200, 330, 100, 90))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_3.setFont(font)
        self.calc_button_3.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.calc_button_3.setObjectName("calc_button_3")
        self.calc_button_point = QtWidgets.QPushButton(calculator)
        self.calc_button_point.setGeometry(QtCore.QRect(300, 418, 100, 88))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_point.setFont(font)
        self.calc_button_point.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_point.setObjectName("calc_button_point")
        self.calc_button_pow = QtWidgets.QPushButton(calculator)
        self.calc_button_pow.setGeometry(QtCore.QRect(400, 419, 100, 88))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_pow.setFont(font)
        self.calc_button_pow.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_pow.setObjectName("calc_button_pow")
        self.calc_button_plus = QtWidgets.QPushButton(calculator)
        self.calc_button_plus.setGeometry(QtCore.QRect(300, 330, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_plus.setFont(font)
        self.calc_button_plus.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_plus.setObjectName("calc_button_plus")
        self.calc_button_minus = QtWidgets.QPushButton(calculator)
        self.calc_button_minus.setGeometry(QtCore.QRect(400, 330, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_minus.setFont(font)
        self.calc_button_minus.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_minus.setObjectName("calc_button_minus")
        self.calc_button_mult = QtWidgets.QPushButton(calculator)
        self.calc_button_mult.setGeometry(QtCore.QRect(300, 240, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_mult.setFont(font)
        self.calc_button_mult.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_mult.setObjectName("calc_button_mult")
        self.calc_button_div = QtWidgets.QPushButton(calculator)
        self.calc_button_div.setGeometry(QtCore.QRect(400, 240, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_div.setFont(font)
        self.calc_button_div.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_div.setObjectName("calc_button_div")
        self.calc_button_left_bracket = QtWidgets.QPushButton(calculator)
        self.calc_button_left_bracket.setGeometry(QtCore.QRect(300, 150, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_left_bracket.setFont(font)
        self.calc_button_left_bracket.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_left_bracket.setObjectName("calc_button_left_bracket")
        self.calc_button_right_bracket = QtWidgets.QPushButton(calculator)
        self.calc_button_right_bracket.setGeometry(QtCore.QRect(400, 150, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(15)
        self.calc_button_right_bracket.setFont(font)
        self.calc_button_right_bracket.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_right_bracket.setObjectName("calc_button_right_bracket")
        self.calc_button_clear = QtWidgets.QPushButton(calculator)
        self.calc_button_clear.setGeometry(QtCore.QRect(300, 60, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(13)
        self.calc_button_clear.setFont(font)
        self.calc_button_clear.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_clear.setObjectName("calc_button_clear")
        self.calc_button_back = QtWidgets.QPushButton(calculator)
        self.calc_button_back.setGeometry(QtCore.QRect(400, 60, 100, 91))
        font = QtGui.QFont()
        font.setPointSize(24)
        font.setBold(False)
        font.setWeight(50)
        self.calc_button_back.setFont(font)
        self.calc_button_back.setStyleSheet("background-color: rgb(224, 234, 255);")
        self.calc_button_back.setObjectName("calc_button_back")

        self.retranslateUi(calculator)
        QtCore.QMetaObject.connectSlotsByName(calculator)

        self.add_functions()


    def retranslateUi(self, calculator):
        _translate = QtCore.QCoreApplication.translate
        calculator.setWindowTitle(_translate("calculator", "Калькулятор"))
        self.calc_label.setText(_translate("calculator", "0"))
        self.calc_button_0.setText(_translate("calculator", "0"))
        self.calc_button_equal.setText(_translate("calculator", "="))
        self.calc_button_7.setText(_translate("calculator", "7"))
        self.calc_button_8.setText(_translate("calculator", "8"))
        self.calc_button_9.setText(_translate("calculator", "9"))
        self.calc_button_4.setText(_translate("calculator", "4"))
        self.calc_button_5.setText(_translate("calculator", "5"))
        self.calc_button_6.setText(_translate("calculator", "6"))
        self.calc_button_1.setText(_translate("calculator", "1"))
        self.calc_button_2.setText(_translate("calculator", "2"))
        self.calc_button_3.setText(_translate("calculator", "3"))
        self.calc_button_point.setText(_translate("calculator", "."))
        self.calc_button_pow.setText(_translate("calculator", "^"))
        self.calc_button_plus.setText(_translate("calculator", "+"))
        self.calc_button_minus.setText(_translate("calculator", "-"))
        self.calc_button_mult.setText(_translate("calculator", "*"))
        self.calc_button_div.setText(_translate("calculator", "/"))
        self.calc_button_left_bracket.setText(_translate("calculator", "("))
        self.calc_button_right_bracket.setText(_translate("calculator", ")"))
        self.calc_button_clear.setText(_translate("calculator", "очистить"))
        self.calc_button_back.setText(_translate("calculator", "⌫"))

    def add_functions(self):
        self.calc_button_0.clicked.connect(lambda: self.write_number('0'))
        self.calc_button_1.clicked.connect(lambda: self.write_number('1'))
        self.calc_button_2.clicked.connect(lambda: self.write_number('2'))
        self.calc_button_3.clicked.connect(lambda: self.write_number('3'))
        self.calc_button_4.clicked.connect(lambda: self.write_number('4'))
        self.calc_button_5.clicked.connect(lambda: self.write_number('5'))
        self.calc_button_6.clicked.connect(lambda: self.write_number('6'))
        self.calc_button_7.clicked.connect(lambda: self.write_number('7'))
        self.calc_button_8.clicked.connect(lambda: self.write_number('8'))
        self.calc_button_9.clicked.connect(lambda: self.write_number('9'))
        self.calc_button_point.clicked.connect(lambda: self.write_number('.'))
        self.calc_button_pow.clicked.connect(lambda: self.write_number('^'))
        self.calc_button_plus.clicked.connect(lambda: self.write_number('+'))
        self.calc_button_minus.clicked.connect(lambda: self.write_number('-'))
        self.calc_button_mult.clicked.connect(lambda: self.write_number('*'))
        self.calc_button_div.clicked.connect(lambda: self.write_number('/'))
        self.calc_button_left_bracket.clicked.connect(lambda: self.write_number('('))
        self.calc_button_right_bracket.clicked.connect(lambda: self.write_number(')'))
        self.calc_button_clear.clicked.connect(self.clear)
        self.calc_button_back.clicked.connect(self.delete_symbol)

        self.calc_button_equal.clicked.connect(self.solve)

    def delete_symbol(self):
        self.calc_label.setText(self.calc_label.text()[:-1])

    def clear(self):
        self.calc_label.setText('0')

    def write_number(self, number):
        if self.calc_label.text() in ('0', "Ошибка"):
            self.calc_label.setText(number)
        else:
            self.calc_label.setText(self.calc_label.text() + number)

    def solve(self):
        try:
            text = self.calc_label.text().replace("^", "**")
            if text != "":
                res = eval(text)
            else:
                res = ""
            self.calc_label.setText(str(res))
        except Exception:
            self.calc_label.setText("Ошибка")

    def closeEvent(self, e):
        print("close")


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    calculator = QtWidgets.QWidget()
    ui = Ui_calculator()
    ui.setupUi(calculator)
    calculator.show()
    sys.exit(app.exec_())
